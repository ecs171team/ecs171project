function [y1] = NolanTrained_NeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Nov-2015 15:33:27.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx27 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [19;1;0;0;0;0;1;19;4;0;2;3;1;0;0;0;0.05;0.05;0;0.05;0;0.196261682242991;0.235756385068762;0;0.235756385068762;0.023121387283237;67.5];
x1_step1_gain = [0.0029940119760479;0.00843881856540084;0.05;0.0153846153846154;0.0165289256198347;0.019047619047619;0.0869565217391304;0.000142511044605957;0.000470366886171214;0.00364963503649635;0.00092464170134073;0.00120772946859903;0.0012779552715655;0.00145243282498184;0.0040650406504065;0.0625;6.51685393258427;4.09893992932862;25.8333333333333;3.82647385984427;7.81818181818182;12.8377818087587;7.50741050451957;28.46875;7.19625021947514;10.9801093809872;0.00083594566353187];
x1_step1_ymin = -1;

% Layer 1
b1 = [-0.10067888074199093928;0.024488120563621942893;-0.77650760723500311666;-1.5556249548809666372;-0.37173104774582976795;-2.0384824095515221565;-1.7927756574872037998;-0.20156693730705446677;2.7920053712964509884;1.610477453020503269];
IW1_1 = [-0.34010740180000625932 0.42682817259516109276 0.088321234072221380118 0.0004505088415253082762 0.012179264513374834372 -0.021480512204711019186 0.051395454913031587973 -0.34570561221072632074 -0.44711179327427624797 -0.41585527257589138816 0.52057133712389236369 0.42357123891271769578 0.13089320017537245389 -0.007620036886042053266 0.011778865184692417084 -0.00068878303227904737714 -0.19175767102681928744 -0.36039575168834458996 -0.14702031598014919656 0.44491485912382072732 0.13760858949838880583 0.081819909614310681878 -0.10639953032101315267 0.04719813292059084342 -0.053012666075798971221 -0.027114496813706260442 -0.30643791984084972624;2.6351512160337722257 2.0160989019955493085 -0.30513517785398069915 -1.1001131596327786699 0.29897014759079681978 -1.5001462376329137705 -1.1748256858517276413 -3.7587840567153945059 -2.5727464168434757141 2.1762361168286528113 2.1157046546915623253 -0.48419371438498809423 2.5524336326403229691 0.3850051959734328566 1.3857587304368230718 -2.528278825469102653 -3.26781695539338779 -0.14789486225607967329 0.35905619123220916533 0.41727888681140046234 3.3085162321910646099 -0.71109513527743173356 -0.12173212020671726752 -2.072014276106304731 -0.915737897417017499 -0.50357424373383374849 3.0354196948362091035;-3.3324961422364220986 1.7288164516512498636 0.074812317780432679992 -1.9239116324784046874 1.1598210901841319309 1.9802773078537749818 1.9915361188198301701 0.19562969906114444085 -0.17038561300953511402 -0.97104022071303530694 1.0225628802110169335 -1.7005848929459326246 0.88196790009620729123 -0.26000446370730140311 -0.48037523961015871077 2.1462995078909354874 0.34245316995393082493 0.0054310733771876376977 0.25612678083961865072 -0.46929936812479378094 -0.59009459762890970058 0.072986269413618826141 -1.0773876424113941752 -1.2746841992779223141 -1.3263174641599455583 -1.1855388442071499444 -2.4703303740716320291;1.1008024933797948552 -1.8428635550478846827 -0.24316608907231254677 -0.28415648542230859119 -0.060075546577388630465 0.11357805548834759568 -0.40179792669165265151 2.8561426647117715838 1.3884734726410048467 1.8095289850102631579 -1.1924640340977967767 -1.5313023615594860694 -0.46149374149311311877 0.42396741042269914246 -0.10132079591158939247 -0.047383542239309968391 1.967177131071478291 0.43440133951840553816 0.28737923115273772412 0.7902488089273043137 -0.3962691013194203915 0.31380777923980640587 0.36907518162878383272 -0.32467949961693598482 -0.16829917780764602764 0.45708179530920750588 1.4240253600732908357;0.16392688397393720412 2.2716756758036247277 -0.39257269418958157248 -0.34740051577161440433 -1.4995433960884014812 -1.2050431385850324251 -0.093760917508675198362 -0.20960699121368261966 0.96312563340137213874 2.5872692247248516573 0.17741877896102251078 -0.43870256315280908854 -0.16152413914311253285 -1.4099353081269823118 -0.24840681289893826178 0.64985877276320103135 0.23547565736417916393 -0.36080418725469159957 0.16342589448845087907 -0.01690882840392614675 -0.69639729014391349438 -0.0020144849108647069902 0.51322780692351666065 0.57953088486964388082 0.69601824884636820379 0.51657142065932870612 -0.76174610506204454285;-1.3074814893305173324 -0.4919655342499362205 0.2630980823992927764 -0.19003040880756255637 0.51528385603807247417 -1.0154051476581456015 4.7473704289770042308 1.794207206498035001 0.19835646063678405437 -1.8140060598675520342 -0.009628600102070184949 -2.5259024878862872399 1.4498007532861743041 -0.07058885222952250571 -0.60738445859184564402 -1.172992128751929819 -0.057814713443314055819 -0.5285398190301499044 -3.5064829776350991963 -1.012377363473415226 0.2007472335775611072 -2.348512176437736354 0.69643384846690936651 0.21363462655707518567 0.20129421111606557449 2.6342157261127110424 -0.38366171096766527038;-0.33985745051008803275 0.22307365516627292168 0.062425805080474662534 -0.58777472392993124206 0.82152685874611930394 0.77602481981291304702 0.69597577898682949638 -0.63708300558595287733 1.4549190160209644063 0.74169687286938845716 1.6450522719711015984 -3.8401558738813390548 -1.1266225582178630571 1.259356569724478403 -0.70148591291854656138 -0.36220716110688111478 1.0371536261475466922 1.3882238967042128674 -1.58614096271099414 0.81985129705345982654 2.541030779114590743 -0.89977191569943970606 -0.94124199715579648373 0.71421699855742304397 -0.87234611492523528309 -0.29170498176776055166 -0.44659631865463578215;1.0279316929290138738 -1.2900321227775775057 -0.26579022831368814828 -0.0011931774037396295288 -0.034475047178924161928 0.065275920270007808943 -0.15473300960077543409 1.0099139690553800008 1.3609425988561509868 1.2436083434262723557 -1.5558187314266749279 -1.2682584692928897674 -0.38785639319514531032 0.024981563558848923767 -0.03470310213265605237 0.00016735637633717801581 0.6682353155725405669 -0.0096493499698130855147 0.29033827182813498613 -0.31106478308130902644 -0.33369427007143276365 -0.038056367716994984884 -0.099163216010022259272 -0.15855377838201523133 0.21863155559044550325 0.32220190342011267859 0.045835208690714772384;0.041788238978357782061 1.1137347189323119068 -1.6064087975931546914 0.16578425888544690014 -0.44670961939883963021 -2.0870817695954593241 0.49803345783613722775 -1.0073927401779494417 0.38746585605942585051 0.22535182834689132525 0.42240603762948664146 -0.14203563965679733005 -3.1906711162004239846 -0.55866773374660771978 -0.70347193043963307524 -1.3437260923201543861 1.3610766242670051529 0.289747014704573147 -0.61943846858415030354 0.46147785333867108459 -1.6255366175959309327 -1.5903904455022861431 0.44519497429775473085 3.7094439612076897106 1.691071200587379586 1.6565805232677712766 -0.21054405172642909339;-0.5035885740885863715 1.235429631502392045 0.48835940191676502353 -0.6340711649945338646 0.79598188315445661534 2.9947785512205462588 1.1773751742646343388 -2.6788258143616299201 -1.6202453590296479469 3.3623311785248080064 0.21129097602451415994 0.42167834510204615928 -1.2048344543237281545 -0.93955465482633315766 2.1032894346201653768 -2.252895248341077572 -1.5170604525652435779 -0.69768189766480415148 0.26409255034185530331 -0.19597621796685904538 0.11107273934536475435 -3.6774416345057976407 -1.647296951761295869 -1.53559004840579294 -1.9039650615803731526 1.293386252311171436 2.3414633925534111825];

% Layer 2
b2 = -0.040768993066923303603;
LW2_1 = [-3.4425693956350165159 0.0012628806607923007306 -0.0002741644628202983343 0.031654096502502809818 -0.0027693890106669132381 -0.000734913339971193574 0.0012822330285045225543 -1.1588871334057426754 -0.47599511891547341413 0.00012649229180608810357];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.00083594566353187;
y1_step1_xoffset = 67.5;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
